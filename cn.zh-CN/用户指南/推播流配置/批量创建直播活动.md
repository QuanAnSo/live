# 批量创建直播活动

创建一个直播活动首先需要一个直播流的推流地址，阿里云直播服务提供的是触发式的活动创建方式，不用使用任何接口，根据活动创建规则即可完成批量的直播互动创建。

## 说明

推流地址可以根据规则进行批量创建，并同时执行直播活动。进行批量直播活动时需要注意直播每个域名对并发流是有限制的，每个域名限制20路并发流，10路转码流，进行批量直播活动时先确认当前限制是否满足您的需求。如不满足。您可 [提交工单](https://selfservice.console.aliyun.com/ticket/createIndex?spm=5176.200001.0.0.qpYMOn) 联系我们。

## 批量构造推流地址

一个直播服务地址的生成采用域名（Domain），应用（AppName），直播流（StreamName）三级直播管理单元，每个域名（Domain）下可创建多个应用（AppName），每个应用下可创建多个直播流（StreamName）。

**说明：** 关于单个推流地址的拼接规则，参见[推流地址与播流地址](/cn.zh-CN/用户指南/推播流配置/推流地址和播流地址/推流地址与播流地址（原画）.md)。

AppName与StreamName可自定义修改。不同的值生成不同的推流和播流地址。

-   您可以在一个应用下创建多个直播流。

    示例

    如有一应用，名称为live，在live下您可创建多条直播流。推流地址为：

    rtmp://推流域名/\{live\}/\{1\}?鉴权串

    rtmp//推流域名/\{live\}/\{2\}?鉴权串

    rtmp://推流域名/\{live\}/\{3\}?鉴权串

    **说明：** 鉴权串是根据鉴权算法得出的一个加密字符串。

-   您也可以创建多个以应用为主的直播流。

    **说明：** 视频直播根据流名称（StreamName）而不是根据应用名称（AppName）来判断直播流是否唯一。如果您设置了不同的应用名称，还要保证流名称不同，才能保证最终的直播流不同。

    示例

    rtmp://推流域名/\{live1\}/\{Stream1\}?鉴权串

    rtmp://推流域名/\{live2\}/\{Stream2\}?鉴权串

    rtmp://推流域名/\{live3\}/\{Stream3\}?鉴权串


## 批量构造播流地址

直播的播流地址规则与推流地址规则一致，播流地址的应用（AppName）、直播流（StreamName）与推流地址的应用（AppName）、直播流（StreamName）相对应。

**说明：** 关于单个播流地址的拼接规则，参见[推流地址与播流地址](/cn.zh-CN/用户指南/推播流配置/推流地址和播流地址/推流地址与播流地址（原画）.md)。

示例

推流地址为：

rtmp://推流域名/\{live\}/\{3\}?鉴权串

对应的播流地址为：

rtmp://播流域名/\{live\}/\{3\}?鉴权串

http://播流域名/\{live\}/\{3\}.flv?鉴权串

http://播流域名/\{live\}/\{3\}.m3u8?鉴权串

artc://播流域名/\{live\}/\{3\}?鉴权串

## 启用转码后如何获取地址

**通用转码**

播流地址由不同参数拼接而成，转码后的播流地址在原画地址上增加模板ID的参数。

地址组成格式为`播流域名`+`AppName`+`StreamName`+`_`+`转码模板名称`。

|模板名称|流畅|标清|高清|超清|
|:---|:-|:-|:-|:-|
|标准模板|lld|lsd|lhd|lud|
|窄带高清TM模板|ld|sd|hd|ud|

示例

如标准转码模板名称为 **sd** ，批量播流地址规则拼接如下：

RTMP 格式：rtmp://播流域名/\{AppName\}/\{StreamName\} \_sd?鉴权串

FLV 格式：http://播流域名/\{AppName\}/\{StreamName\} \_sd.flv?鉴权串

HLS 格式：http://播流域名/\{AppName\}/\{StreamName\} \_sd.m3u8?鉴权串

UDP 格式：artc://播流域名/\{AppName\}/\{StreamName\} \_sd?鉴权串

**自定义转码**

您还可根据需要进行自定义转码。自定义转码模板的名称 **模板ID** 需要您在控制台进行设置。

![](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/2787500061/p31874.png)

批量播流地址规则拼接如下：

RTMP 格式：rtmp://播流域名/\{AppName\}/\{StreamName\} \_模板ID?鉴权串

FLV 格式：http://播流域名/\{AppName\}/\{StreamName\} \_模板ID.flv?鉴权串

HLS 格式：http://播流域名/\{AppName\}/\{StreamName\} \_模板ID.m3u8?鉴权串

UDP 格式：artc://播流域名/\{AppName\}/\{StreamName\} \_模板ID?鉴权串

